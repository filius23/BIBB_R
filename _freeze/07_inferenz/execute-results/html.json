{
  "hash": "69076f6d6073591d5460758df18d99c8",
  "result": {
    "markdown": "# Inferenzstatistik & Zusammenhangsmaße\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\netb18_kap7 <- haven::read_dta(\"./data/BIBBBAuA_2018_suf1.0.dta\",\n                         n_max = 1000,\n                         col_select = c(\"intnr\",\"zpalter\",\"S1\",\"F231\",\"az\",\"F600_12\",\n                                        \"m1202\",\"F204\",\"gew2018_hr17\",\"gew2018\",\"F518_SUF\",\n                                        \"F411_01\",\"S3\",\"Mig\")) %>% \n  mutate(F600_12 = ifelse(F600_12 > 4,NA,F600_12),\n         zpalter = ifelse(zpalter>100,NA,zpalter),\n         m1202 = ifelse(m1202 > 4,NA,m1202))\n```\n:::\n\n\nNeue Pakete:\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"effectsize\") # u.a. Cohen's D berechnen \ninstall.packages(\"survey\") # Gewichtung\n```\n:::\n\n\nBisher haben wir die Angaben aus unserem Datensatz immer als fix angesehen. \nZiel einer statistischen Auswertung ist aber meistens, Aussagen über die *Grundgesamtheit* oder *Population* zu treffen. \nIm Fall der ETB 2018 wären das also alle Erwerbstätigen in Deutschland.\n\n\n## t-Tests\n\nEines der zentralen Werkzeuge der grundlegenden Inferenzstatistik ist der t-Test.\n\nEin typischer Anwendungsfall für t-Tests ist der Gruppenvergleich, dazu geben wir in `t.test()` die zu testende Variable und und nach einer `~`[^tilde2] die Gruppenvariable an. \nWir testen hier also auf Altersunterschiede zwischen Männern (`S1`=1, daher group1) und Frauen (`S1`=2, daher group2).\n\n[^tilde2]: Tastaturbefehle: `Alt Gr` + `*` auf Windows. Auf macOS `Alt` + `N` und anschließend ein Leerzeichen, damit die Tilde erscheint.\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(etb18_kap7$zpalter~etb18_kap7$S1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tWelch Two Sample t-test\n\ndata:  etb18_kap7$zpalter by etb18_kap7$S1\nt = -2.549, df = 974.9, p-value = 0.01095\nalternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0\n95 percent confidence interval:\n -3.1679965 -0.4119377\nsample estimates:\nmean in group 1 mean in group 2 \n       47.28484        49.07480 \n```\n:::\n:::\n\n\nEs hat sich als Konvention etabliert, von einem signifikanten Unterschied zu sprechen wenn die Irrtumswahrscheinlichkeit unter 5% liegt. Das bedeutet:\n\n<!-- > *Assuming that the null hypothesis is true and the study is repeated an infinite number times by drawing random samples from the same populations(s), less than 5% of these results will be more extreme than the current result.*[^1] -->\n\n<!-- [^1]: [Failing Grade: 89% of Introduction-to-Psychology Textbooks That Define or Explain Statistical Significance Do So Incorrectly. Advances in Methods and Practices in Psychological Science, 2515245919858072.](https://doi.org/10.1177/2515245919858072) -->\n\nDa hier der p-Wert sehr viel kleiner ist als 0.05 ist (`p-value < 2.2e-16`)[^ehoch], können wir von einen statistisch signifikanten Unterschied sprechen.  \n\n[^ehoch]: `2.2e-16` steht für 2.2 aber mit 16 Nullen vorweg. Das ist Rs Art zu sagen, dass der Wert sehr sehr klein ist.\n\nStandardmäßig bekommen wir einen beidseitigen Test (`\"two.sided\"`), wir können aber auch einen links- (`\"less\"`) oder rechtsseitigen (`\"greater\"`) Test anfordern [mehr dazu](#hypt):\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(etb18_kap7$zpalter~etb18_kap7$S1,alternative = \"two.sided\")\nt.test(etb18_kap7$zpalter~etb18_kap7$S1,alternative = \"less\")\nt.test(etb18_kap7$zpalter~etb18_kap7$S1,alternative = \"greater\")\n```\n:::\n\n\nFür Effektgrößen wie Cohen's D empfiehlt sich das Paket [{effectsize}](https://easystats.github.io/effectsize/index.html):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(effectsize)\ncohens_d(etb18_kap7$zpalter~etb18_kap7$S1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCohen's d |         95% CI\n--------------------------\n-0.16     | [-0.29, -0.04]\n\n- Estimated using pooled SD.\n```\n:::\n:::\n\n\n\n<!-- https://github.com/gergness/srvyr/ -->\n<!-- https://federicovegetti.github.io/teaching/heidelberg_2018/lab/sst_lab_day2.html -->\n<!-- http://people.ku.edu/~chkim/soc910/note/Soc910_Note_04_Weight.pdf -->\n\n\n### [Übung](#ttestue)\n\n## Korrelation {#pearson}\n\nDen Korrelationskoeffizienten können wir in R mit `cor.test()` berechnen:\n\n`F231`: Wie viele Stunden arbeiten Sie i.d.R. im Durchschnitt pro Woche von zu Hause aus?\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(etb18_kap7$zpalter,etb18_kap7$F231,method = \"pearson\", use = \"pairwise.complete.obs\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's product-moment correlation\n\ndata:  etb18_kap7$zpalter and etb18_kap7$F231\nt = 0.48542, df = 286, p-value = 0.6277\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n -0.08717658  0.14379451\nsample estimates:\n       cor \n0.02869194 \n```\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\nEs handelt sich mit 0.0287 also um einen geringen Zusammenhang. Der p-Wert gibt uns auch hier wieder Auskunft über die stat. Signifikanz: mit 0.62775 liegt der p-Wert deutlich unter 0,05.\n\nUm eine  Korrelationsmatrix zu erhalten hilft das Paket [{correlation}](https://github.com/easystats/correlation): \n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"correlation\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(correlation)\netb18_kap7 %>% select(zpalter,F231,az) %>% \n  correlation() %>% \n  summary(.)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# Correlation Matrix (pearson-method)\n\nParameter |    az | F231\n------------------------\nzpalter   | -0.05 | 0.03\nF231      | -0.10 |     \n\np-value adjustment method: Holm (1979)\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorr_df <- \n  etb18_kap7 %>%\n    group_by(S1) %>%\n    select(zpalter,F231,az) %>% \n    correlation()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nAdding missing grouping variables: `S1`\n```\n:::\n\n```{.r .cell-code}\ndata.frame(corr_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Group Parameter1 Parameter2            r   CI      CI_low    CI_high\n1     1    zpalter       F231 -0.008016615 0.95 -0.16106862 0.14541192\n2     1    zpalter         az -0.006654458 0.95 -0.09536128 0.08215722\n3     1       F231         az -0.107424635 0.95 -0.25645259 0.04659229\n4     2    zpalter       F231  0.029864101 0.95 -0.14722774 0.20510074\n5     2    zpalter         az -0.038373166 0.95 -0.12495280 0.04878647\n6     2       F231         az  0.042311811 0.95 -0.13429355 0.21631207\n           t df_error         p              Method n_Obs\n1 -0.1020381      162 1.0000000 Pearson correlation   164\n2 -0.1467035      486 1.0000000 Pearson correlation   488\n3 -1.3752506      162 0.5128577 Pearson correlation   164\n4  0.3300070      122 1.0000000 Pearson correlation   124\n5 -0.8638192      506 1.0000000 Pearson correlation   508\n6  0.4696813      123 1.0000000 Pearson correlation   125\n```\n:::\n:::\n\n\n<!-- ## Ergebnisse weiterverarbeiten -->\n\n<!-- Die Kennzahlen aus dem Output können wir auch separat aufrufen: -->\n<!-- ```{r} -->\n<!-- ttest1 <- t.test(etb18_kap7$zpalter~etb18_kap7$S1,alternative = \"two.sided\") -->\n<!-- ttest1$statistic # t-Wert -->\n<!-- ttest1$p.value # p-Wert -->\n<!-- ``` -->\n<!-- Mit `tidy()` aus [{broom}](https://broom.tidymodels.org/) können wir einen `data.frame()` erstellen, der die wesentlichen Parameter enthält: -->\n<!-- ```{r} -->\n<!-- #| eval: false -->\n<!-- library(broom) -->\n<!-- tidy(ttest1) -->\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n<!-- #| echo: false -->\n<!-- library(broom) -->\n<!-- tidy(ttest1) %>%  -->\n<!--   rmarkdown::paged_table() -->\n<!-- ``` -->\n\n<!-- Was hilft uns das?  -->\n\n<!-- Wir können diesen `data.frame()` mit `{ggplot}` visualisieren, indem wir die Konfidenzintervallgrenzen in `geom_pointrange()` angeben: -->\n<!-- ```{r} -->\n<!-- #| out-width: \"80%\" -->\n<!-- #| fig-height: 1.5 -->\n<!-- library(ggplot2) -->\n<!-- tidy(ttest1) %>%  -->\n<!-- ggplot(aes(y=method,x=estimate)) + -->\n<!--   geom_vline(aes(xintercept = 0),linetype = \"dashed\") + -->\n<!--   geom_errorbarh(aes(xmin = conf.low,xmax = conf.high), color = \"navy\", height = .2) +  -->\n<!--   geom_point(color = \"navy\", size = 2) -->\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n\n<!-- data.frame(corr_df) %>%  -->\n<!--   ggplot(aes(y=Parameter1,x=r, color = Parameter2)) + -->\n<!--   geom_vline(aes(xintercept = 0),linetype = \"dashed\") + -->\n<!--   geom_errorbarh(aes(xmin = CI_low,xmax = CI_high), height = .2) +  -->\n<!--   geom_point(size = 2) + -->\n<!--   facet_wrap(~Group) -->\n<!-- ``` -->\n\n<!-- Wir können mit `bind_rows()` auch mehrere Tests zu einem `data.frame` zusammenfügen: -->\n<!-- ```{r} -->\n<!-- ttest_m <-  -->\n<!--   cor.test(etb18_kap7$zpalter[etb18_kap7$S1==1], -->\n<!--            etb18_kap7$F231[etb18_kap7$S1==1],method = \"pearson\", use = \"pairwise.complete.obs\") -->\n\n<!-- ttest_w <-  -->\n<!--   cor.test(etb18_kap7$zpalter[etb18_kap7$S1==2], -->\n<!--            etb18_kap7$F231[etb18_kap7$S1==2],method = \"pearson\", use = \"pairwise.complete.obs\") -->\n\n<!-- test_df2 <- bind_rows(tidy(ttest_m), -->\n<!--                       tidy(ttest_w),  -->\n<!--                       .id = \"S1\") # Variable S1 erstellen als Identifikator -->\n\n<!-- test_df2 -->\n<!-- ``` -->\n\n<!-- Das können wir jetzt wieder plotten: -->\n<!-- ```{r} -->\n<!-- #| out-width: \"80%\" -->\n<!-- #| fig-height: 2 -->\n<!-- ggplot(test_df2,aes(y=S1,x=estimate)) + -->\n<!--   geom_vline(aes(xintercept = 0),linetype = \"dashed\") + -->\n<!--   geom_pointrange(aes(xmin = conf.low,xmax = conf.high), color = \"navy\") -->\n<!-- ``` -->\n\n\n\n## Weitere Zusammenshangsmaße:\n\n### Rangkorrelation & Kendall's $\\tau$\n   \nEin klassisches ordinales Merkmal ist die Schulbildung, die wir aus `S3` zusammenfassen können (Details im Code-Fenster unten). \nWir sehen uns den (möglichen) Zusammenhang zwischen dem höchsten Ausbildungsabschluss `m1202` und `F600_12` an:\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-condensed\" style=\"font-size: 10px; width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;color: white !important;\"> v </th>\n   <th style=\"text-align:left;color: white !important;\"> l </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;font-weight: bold;background-color: rgba(242, 242, 242, 1) !important;\"> F600_12 </td>\n   <td style=\"text-align:left;font-weight: bold;background-color: rgba(242, 242, 242, 1) !important;\"> Häufigkeit: unter Lärm arbeiten </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> 1 </td>\n   <td style=\"text-align:left;\"> häufig </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> 2 </td>\n   <td style=\"text-align:left;\"> manchmal </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> 3 </td>\n   <td style=\"text-align:left;\"> selten </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-family: monospace;\"> 4 </td>\n   <td style=\"text-align:left;\"> nie </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nFür den Spearman-Rangkorrelationskoeffizienten können wir `method = \"spearman\"` nutzen:\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(etb18_kap7$m1202,etb18_kap7$F600_12,method = \"spearman\", use = \"pairwise.complete.obs\")\n```\n:::\n\n\nEin weiteres Zusammenhangsmaß für ordinale Variablen sind Konkordanzmaße wie Kendall's $\\tau$, mit der Option `method = \"kendall\"`:\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(etb18_kap7$m1202,etb18_kap7$F600_12, method = \"kendall\", use = \"pairwise.complete.obs\")\n```\n:::\n\n\n\n### $\\chi^2$ & Cramér's $v$ {#chi2}\n\nMit `chisq.test()` bekommen wir $\\chi^2$ ausgegeben, diese müssen wir jedoch auf ein `xtabs()`-Objekt anwenden (`F204` Mehrarbeitsvergütung und `S1` Geschlecht)\n\n::: {.cell}\n\n```{.r .cell-code}\ntab1 <- xtabs(~ F204 + S1, data = etb18_kap7)\nchisq.test(tab1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  tab1\nX-squared = 12.541, df = 4, p-value = 0.01375\n```\n:::\n:::\n\n\nFür Cramér's $v$ können wir wieder auf `{effectsize}` zurückgreifen:\n\n::: {.cell}\n\n```{.r .cell-code}\neffectsize::cramers_v(etb18_kap7$F204,etb18_kap7$S1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCramer's V |       95% CI\n-------------------------\n0.17       | [0.06, 1.00]\n\n- One-sided CIs: upper bound fixed at [1.00].\n```\n:::\n:::\n\n\n[Weitere Maße](#corrs)\n\n### [Übung](#corr)\n\n## Gewichtung \n\n\n> Bei der Datenanalyse ist man oft mit einer Stichprobe aus einer größeren Population konfrontiert und man möchte aus dieser Stichprobe Rückschlüsse auf die größere Population ziehen. Die meisten statistischen Verfahren für diese sog. „Inferenzstatistik“ beruhen dabei auf der Annahme, dass die Stichprobe eine einfache Zufallsstichprobe ist. Bei einer solchen Stichprobe gelangen alle Elemente der Grundgesamtheit mit der gleichen Wahrscheinlichkeit in die Stichprobe. In der Praxis sind solche Stichproben aber die große Ausnahme. Häufig haben bestimmte Gruppen von Personen höhere Auswahlwahrscheinlichkeiten als andere. [Kohler/Kreuter, S.81](https://doi.org/10.1515/9783110469509)\n\n\n\nGewichte sind ein häufig verwendetes Gegenmittel. \nDie einfachste Variante für eine Gewichtung ist die Option  `wt=` in `count()`:\n\n::: {.cell}\n\n```{.r .cell-code}\netb18_kap7 %>% \n  count(S1,m1202,wt = gew2018_hr17)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 3\n   S1           m1202       n\n   <dbl+lbl>    <dbl>   <dbl>\n 1 1 [männlich]    -1   1988.\n 2 1 [männlich]     1 115140.\n 3 1 [männlich]     2 496863.\n 4 1 [männlich]     3 127220.\n 5 1 [männlich]     4 268891.\n 6 2 [weiblich]    -1   1893.\n 7 2 [weiblich]     1  70031.\n 8 2 [weiblich]     2 459651.\n 9 2 [weiblich]     3  55828.\n10 2 [weiblich]     4 237108.\n```\n:::\n:::\n\n\nFür umfangreichere Anwendungen stehen in R stehen die Pakete [`{survey}`](https://stylizeddata.com/how-to-use-survey-weights-in-r/) und das darauf aufbauende [`{srvyr}`](https://cran.r-project.org/web/packages/srvyr/vignettes/srvyr-vs-survey.html) zur Verfügung.\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"survey\")\n```\n:::\n\n\n\nZunächst verwenden wir `svydesign()`, um die Gewichtung festzulegen. \nIm weiteren stellt [`{survey}`](https://stylizeddata.com/how-to-use-survey-weights-in-r/) dann zahlreiche Funktionen zur Verfügung, die eine gewichtete Variante der basis-Befehle sind - bspw. `svymean()` und `svytable()`:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(survey)\netb18_kap7_weighted <- svydesign(id      = ~intnr,\n                            weights = ~gew2018,\n                            data    = etb18_kap7)\n\nsvymean(~zpalter, etb18_kap7_weighted, na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          mean     SE\nzpalter 44.234 0.6175\n```\n:::\n\n```{.r .cell-code}\nmean(etb18_kap7$zpalter, na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 48.19779\n```\n:::\n:::\n\nFür Tabellen gibt es in `{survey}` auch eine Funktion: `svytable(~S1+m1202,etb18_kap7_weighted)`\n\nFür [Regressionsmodelle](#reg) gibt es bspw. `survey::svyglm()`\n\nLektüre: [Kiesl, H. (2014). Gewichtung. In N. Baur & J. Blasius (Eds.), Handbuch Methoden der empirischen Sozialforschung (pp. 349–356). Springer Fachmedien Wiesbaden.](https://doi.org/10.1007/978-3-531-18939-0_24)\n\n\n\n## Übungen\n\n### Übung 1 {#ttestue}\n\n\n::: {.cell}\n\n```{.r .cell-code}\netb18_ue7 <- haven::read_dta(\"./data/BIBBBAuA_2018_suf1.0.dta\",\n                         n_max = 1000,\n                         col_select = c(\"intnr\",\"S1\",\"az\",\"F518_SUF\",\"m1202\",\"F411_01\",\"gew2018\")) %>% \n  mutate(across(matches(\"m1202|F411_01\"), ~ifelse(.x > 4|.x<0,NA,.x))) # missings in m1202 mit NA überschreiben\n```\n:::\n\n\nTesten Sie die Hypothese, dass ein signifikanter Unterschied in der Arbeitszeit (`az`) zwischen Männern und Frauen besteht (`S1`). Beide Variablen haben keine Missings - Sie können direkt los legen\n\nBerechnen Sie das Cohen's d für diesen Zusammenhang.\n\n\n\n### Übung 2 {#corr}\n\n+ Untersuchen Sie die Korrelation zwischen der Wochenarbeitszeit (`az`) und dem Einkommen (`F518_SUF`) der Befragten.\n\n+ Denken Sie daran, die Missings in `F518_SUF` auszuschließen: `etb18_kap7$F518_SUF[etb18_kap7$F518_SUF>99990] <- NA`, `az` hat keine Missings.\n+ Berechnen Sie die Rangkorrelation für den Zusammenhang zwischen der Häufigkeit von starkem Termin- oder Leistungsdruck `F411_01` und der Ausbildungsvariable `m1202`.\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"rqbubbthqw\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#rqbubbthqw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 12px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rqbubbthqw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rqbubbthqw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rqbubbthqw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rqbubbthqw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rqbubbthqw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rqbubbthqw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rqbubbthqw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rqbubbthqw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rqbubbthqw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rqbubbthqw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rqbubbthqw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rqbubbthqw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rqbubbthqw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rqbubbthqw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rqbubbthqw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rqbubbthqw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rqbubbthqw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rqbubbthqw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rqbubbthqw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rqbubbthqw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rqbubbthqw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rqbubbthqw .gt_left {\n  text-align: left;\n}\n\n#rqbubbthqw .gt_center {\n  text-align: center;\n}\n\n#rqbubbthqw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rqbubbthqw .gt_font_normal {\n  font-weight: normal;\n}\n\n#rqbubbthqw .gt_font_bold {\n  font-weight: bold;\n}\n\n#rqbubbthqw .gt_font_italic {\n  font-style: italic;\n}\n\n#rqbubbthqw .gt_super {\n  font-size: 65%;\n}\n\n#rqbubbthqw .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#rqbubbthqw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rqbubbthqw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rqbubbthqw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rqbubbthqw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rqbubbthqw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rqbubbthqw .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">var</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">.</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">1</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">2</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">3</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">4</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">9</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\" style=\"font-family: Roboto;\">F411_01</td>\n<td class=\"gt_row gt_left\">Wie häufig kommt es vor, dass Sie unter starkem Termin- oder Leistungsdruck arbe</td>\n<td class=\"gt_row gt_left\">häufig</td>\n<td class=\"gt_row gt_left\">manchmal</td>\n<td class=\"gt_row gt_left\">selten</td>\n<td class=\"gt_row gt_left\">nie</td>\n<td class=\"gt_row gt_left\">keine Angabe</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n<!-- + Berechnen Sie die Rangkorrelation getrennt für Männer und Frauen (Hinweis: die Rangkorrelation können Sie mit in `{correlation}` mit `correlation(method = \"spearman\")` berechnen)  -->\n\n\n<!--   + So können Sie `educ` in `etb18_kap7` erstellen und die Missings in `F411_01` überschreiben und Erstellen Sie einen kleineren Datensatz, indem Sie die ersten 300 Zeilen auswählen: -->\n<!-- ```{r, eval =F} -->\n<!-- etb18_kap7_small <-  -->\n<!--   etb18_kap7 %>%  -->\n<!--   mutate(educ = case_when(S3 %in% 2:4 ~ 1, -->\n<!--                           S3 %in% 5:6 ~ 2, -->\n<!--                           S3 %in% 7:8 ~ 3), -->\n<!--          F411_01 = ifelse(F411_01 > 4,NA,F411_01)) %>%  -->\n<!--   slice(1:300) -->\n<!-- ``` -->\n<!--   + Erstellen Sie eine Kreuztabelle aus `educ` und `F411_01` -->\n<!--   + Berechnen Sie Spearman's $\\rho$, Kendall's $\\tau$ und Cramér's $v$ auf Basis von `etb18_kap7_small`. -->\n\n\n### Übung 3 {#weight}\n\n+ Legen Sie die Gewichtung auf Basis von `gew2018` an.\n+ Berechnen Sie den Mittelwert für den Bruttoverdienst `F518_SUF` (Schließen Sie die Missings ggf. mit `etb18_kap7$F518_SUF[etb18_kap7$F518_SUF>99990] <- NA` - sie können mit `max(etb18_kap7$F518_SUF,na.rm = T)` überprüfen ob das Maximum bei 99999 liegt)\n\n::: {.cell}\n\n:::\n\n\n\n<!-- + Erstellen Sie eine Kontingenztabelle für `gkpol` und `Mig` - einmal gewichtet und einmal ohne Gewichte. Sehen Sie die Unterschiede? -->\n\n<!-- ```{r} -->\n<!-- #| echo: false -->\n<!-- #| warning: false -->\n<!-- #| message: false -->\n<!-- library(gt) -->\n<!-- etb18_kap7 %>% select(matches(\"gkpol|Mig\")) %>%  -->\n<!--   map_dfr(.,~attributes(.x)$labels,.id = \"var\") %>%  -->\n<!--   pivot_longer(-var) %>%  -->\n<!--   filter(!is.na(value)) %>%  -->\n<!--   gt() %>%  -->\n<!--   tab_options(  table.font.size = 12) %>%  -->\n<!--   tab_style(style = cell_text(font = \"Roboto\"),locations = cells_body(var)) -->\n<!-- ``` -->\n\n## Anhang\n\n### Weitere Korrelationsmaße {#corrs}\n\nKendall's $\\tau_a$, welches im Nenner alle Paarvergleiche berücksichtigt, können wir mit `KendallTauA()` aus dem Paket `DescTools` berechnen:\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"DescTools\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DescTools)\nKendallTauA(etb18_kap7$m1202,etb18_kap7$F600_12)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.08970494\n```\n:::\n:::\n\nDer Wert ist deutlich niedriger als von Kendall's $\\tau_b$, da hier der Nenner durch die Berücksichtigung *aller* möglichen Paarvergleiche größer wird, der Zähler aber für beide Varianten von Kendall's $\\tau$ gleich definiert ist. \n\n\nEine andere Alternative, welche auch beim Vorliegen von Bindungen den vollen Wertebereich [-1,1] erreichen kann ist Goodman & Kruskal's $\\gamma$. Dieses können wir mit dem Befehl `GoodmanKruskalGamma` aus dem Paket `{DescTools}` berechnen:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DescTools)\nGoodmanKruskalGamma(etb18_kap7$m1202,etb18_kap7$F600_12)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.2064219\n```\n:::\n:::\n\nAuch Goodman & Kruskal's $\\gamma$ deutet auf einen negativen Zusammenhang hin, hier ist die Stärke aber deutlich höher. Dies ist auf die Berücksichtigung der Bindungen zurückzuführen: hier werden alle Bindungen ausgeschlossen, also auch Paarvgleiche mit Bindungen nur auf  einer Variable. Es reduziert sich also der Nenner, somit ergibt sich im Ergebnis ein höherer Koeffizient für Goodman & Kruskal's $\\gamma$ als für Kendall's $\\tau_b$. \n\n\n::: {.cell}\n\n```{.r .cell-code}\netb18_kap7 %>% \n  select(m1202,F600_12) %>% \n  correlation(method = \"kendall\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# Correlation Matrix (kendall-method)\n\nParameter1 | Parameter2 |  tau |       95% CI |    z |         p\n----------------------------------------------------------------\nm1202      |    F600_12 | 0.14 | [0.10, 0.18] | 4.93 | < .001***\n\np-value adjustment method: Holm (1979)\nObservations: 999\n```\n:::\n:::\n\n[Hier findet sich eine Liste weiterer Kennzahlen, die sich mit {correlate}](https://easystats.github.io/correlation/articles/types.html) berechnen lassen.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}