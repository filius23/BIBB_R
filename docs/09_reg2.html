<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R am BIBB - 9&nbsp; Regressionsmodelle: Erweiterungen</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./10_log_reg.html" rel="next">
<link href="./09_reg.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regressionsmodelle: Erweiterungen</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R am BIBB</a> 
        <div class="sidebar-tools-main">
    <a href="./R-am-BIBB.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Willkommen</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einstieg in R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Arbeiten mit Datensätzen in R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_desc.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Einen Überblick erhalten</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualisierung mit <code>{ggplot2}</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_data_wrangle1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Wrangling I: Labels</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_data_wrangle2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Wrangling II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_inferenz.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Inferenzstatistik &amp; Zusammenhangsmaße</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_reg.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regressionsmodelle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_reg2.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regressionsmodelle: Erweiterungen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_log_reg.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Logistische Regressionsmodelle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_data_wrangle3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Wrangling III</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_apply_loop.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Schleifen &amp; Funktionen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_tabellenexport.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Tabellenexport</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_RMarkdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">RMarkdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Links &amp; Weiterführendes</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#nur-vollständige-zeilen-behalten" id="toc-nur-vollständige-zeilen-behalten" class="nav-link active" data-scroll-target="#nur-vollständige-zeilen-behalten"> <span class="header-section-number">9.1</span> Nur vollständige Zeilen behalten</a>
  <ul class="collapse">
  <li><a href="#complete.cases" id="toc-complete.cases" class="nav-link" data-scroll-target="#complete.cases"> <span class="header-section-number">9.1.1</span> <code>complete.cases()</code></a></li>
  <li><a href="#fälle-mit-missings-finden" id="toc-fälle-mit-missings-finden" class="nav-link" data-scroll-target="#fälle-mit-missings-finden"> <span class="header-section-number">9.1.2</span> Fälle mit missings finden</a></li>
  <li><a href="#modelle-nur-mit-vollständigen-fällen-berechnen" id="toc-modelle-nur-mit-vollständigen-fällen-berechnen" class="nav-link" data-scroll-target="#modelle-nur-mit-vollständigen-fällen-berechnen"> <span class="header-section-number">9.1.3</span> Modelle nur mit vollständigen Fällen berechnen</a></li>
  </ul></li>
  <li><a href="#interaktionen" id="toc-interaktionen" class="nav-link" data-scroll-target="#interaktionen"> <span class="header-section-number">9.2</span> Interaktionen</a></li>
  <li><a href="#quadratische-terme-polynome" id="toc-quadratische-terme-polynome" class="nav-link" data-scroll-target="#quadratische-terme-polynome"> <span class="header-section-number">9.3</span> Quadratische Terme &amp; Polynome</a></li>
  <li><a href="#gewichtetes-regressionsmodell" id="toc-gewichtetes-regressionsmodell" class="nav-link" data-scroll-target="#gewichtetes-regressionsmodell"> <span class="header-section-number">9.4</span> Gewichtetes Regressionsmodell</a></li>
  <li><a href="#weitere-beispiele-mit-starwars" id="toc-weitere-beispiele-mit-starwars" class="nav-link" data-scroll-target="#weitere-beispiele-mit-starwars"> <span class="header-section-number">9.5</span> Weitere Beispiele mit <code>starwars</code></a></li>
  <li><a href="#robuste-standardfehler" id="toc-robuste-standardfehler" class="nav-link" data-scroll-target="#robuste-standardfehler"> <span class="header-section-number">9.6</span> “Robuste” Standardfehler</a></li>
  <li><a href="#fixed-effects-modelle-mit-fixest" id="toc-fixed-effects-modelle-mit-fixest" class="nav-link" data-scroll-target="#fixed-effects-modelle-mit-fixest"> <span class="header-section-number">9.7</span> Fixed effects Modelle mit <code>{fixest}</code></a></li>
  <li><a href="#mehrebenenmodelle-mit-lme4" id="toc-mehrebenenmodelle-mit-lme4" class="nav-link" data-scroll-target="#mehrebenenmodelle-mit-lme4"> <span class="header-section-number">9.8</span> Mehrebenenmodelle mit <code>{lme4}</code></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regressionsmodelle: Erweiterungen</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Nach den basics für Regressionsmodelle sehen wir uns in diesem Kapitel einige hilfreiche Erweiterungen von Regressionsmodellen in R an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id   =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">var1 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>,<span class="dv">5</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">var2 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">7</span>, <span class="dv">4</span>,<span class="dv">25</span>,<span class="dv">3</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">educ =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>,<span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">gend =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">x    =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>) )</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>dat1<span class="sc">$</span>ed_fct <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat1<span class="sc">$</span>educ, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"basic"</span>,<span class="st">"medium"</span>,<span class="st">"high"</span>))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>dat1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id var1 var2 educ gend  x ed_fct
1  1    2    2    3    2  2   high
2  2    1    2    1    1  1  basic
3  3    2    1    2    1  2 medium
4  4    5    9    2    2  4 medium
5  5    7    7    1    1  1  basic
6  6    8    4    3    2 NA   high
7  7    9   25    2    1 NA medium
8  8    5    3   -1    2 NA   &lt;NA&gt;</code></pre>
</div>
</div>
<section id="nur-vollständige-zeilen-behalten" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="nur-vollständige-zeilen-behalten"><span class="header-section-number">9.1</span> Nur vollständige Zeilen behalten</h2>
<p>Wenn wir die beiden Modelle <code>m1</code> und <code>m3</code> vergleichen, sehen wir unterschiedliche Fallzahlen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(var2<span class="sc">~</span> var1, <span class="at">data =</span> dat1)  </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(var2 <span class="sc">~</span> ed_fct  <span class="sc">+</span> var1, dat1)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(<span class="st">"m1"</span><span class="ot">=</span>m1,<span class="st">"m4"</span><span class="ot">=</span>m4),<span class="at">gof_omit =</span> <span class="st">"IC|RM|Log|F"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> m1 </th>
   <th style="text-align:center;"> m4 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:center;"> −2.340 </td>
   <td style="text-align:center;"> −2.511 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (4.345) </td>
   <td style="text-align:center;"> (5.681) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> var1 </td>
   <td style="text-align:center;"> 1.839 </td>
   <td style="text-align:center;"> 1.753 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (0.773) </td>
   <td style="text-align:center;"> (0.835) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ed_fctmedium </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;"> 4.830 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;"> (6.038) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ed_fcthigh </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;"> −3.253 </td>
  </tr>
  <tr>
   <td style="text-align:left;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (6.554) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Num.Obs. </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 </td>
   <td style="text-align:center;"> 0.486 </td>
   <td style="text-align:center;"> 0.700 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 Adj. </td>
   <td style="text-align:center;"> 0.400 </td>
   <td style="text-align:center;"> 0.400 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Es zeigt sich, dass in Modell <code>m4</code> mit <code>edu_fct</code> 1 Fall verloren geht. Woran liegt das? Dazu lohnt sich ein Blick in die Daten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dat1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id var1 var2 educ gend  x ed_fct
1  1    2    2    3    2  2   high
2  2    1    2    1    1  1  basic
3  3    2    1    2    1  2 medium
4  4    5    9    2    2  4 medium
5  5    7    7    1    1  1  basic
6  6    8    4    3    2 NA   high
7  7    9   25    2    1 NA medium
8  8    5    3   -1    2 NA   &lt;NA&gt;</code></pre>
</div>
</div>
<p>Die Angabe für <code>ed_fct</code> fehlt in für <code>id</code> = 8.</p>
<p>Um die Modelle zu vergleichen sollten wir also nur die Zeilen verwenden, für die auch die Werte für <code>ed_fct</code> vorliegen. Hier können wir diese Zeilen per Hand auswählen (und <code>id</code>=8 ausschließen), in größeren Datensätzen ist das aber mühsam.</p>
<section id="complete.cases" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="complete.cases"><span class="header-section-number">9.1.1</span> <code>complete.cases()</code></h3>
<p>Hier hilft uns <code>complete.cases()</code>. Diese Funktion erstellt eine logische Variable, welche ein <code>TRUE</code> für alle vollständigen Fälle (also ohne ein <code>NA</code>). Unvollständige Fälle werden mit einem <code>FALSE</code> versehen. Dazu geben wir an, welche Variablen jeweils für diese Betrachtung berücksichtigt werden sollen und legen die Variable einfach im Datensatz als neue Spalte an. Für Modell 1 ist ein Fall <code>complete</code>, wenn <code>var2</code> und <code>var1</code> vorliegen. Wir wählen also mit <code>select()</code> die relevanten Variablen aus und wenden <code>complete.cases</code> auf diese Auswahl an:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(var1,var2) <span class="sc">%&gt;%</span> <span class="fu">complete.cases</span>(.) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dat1<span class="sc">$</span>compl_m1 <span class="ot">&lt;-</span> dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(var1,var2) <span class="sc">%&gt;%</span> <span class="fu">complete.cases</span>(.) </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>dat1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id var1 var2 educ gend  x ed_fct compl_m1
1  1    2    2    3    2  2   high     TRUE
2  2    1    2    1    1  1  basic     TRUE
3  3    2    1    2    1  2 medium     TRUE
4  4    5    9    2    2  4 medium     TRUE
5  5    7    7    1    1  1  basic     TRUE
6  6    8    4    3    2 NA   high     TRUE
7  7    9   25    2    1 NA medium     TRUE
8  8    5    3   -1    2 NA   &lt;NA&gt;     TRUE</code></pre>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<code>complete.cases()</code> alleine sucht in allen Variablen nach <code>NA</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Achtung: wenn wir keine Variablen angeben, werden <code>NA</code> aus allen Variablen berücksichtigt, hier also auch die <code>NA</code> aus <code>x</code> - die uns hier nicht interessieren:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="sc">%&gt;%</span> <span class="fu">complete.cases</span>(.) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dat1<span class="sc">$</span>compl <span class="ot">&lt;-</span> dat1 <span class="sc">%&gt;%</span> <span class="fu">complete.cases</span>(.) </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>dat1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id var1 var2 educ gend  x ed_fct compl_m1 compl
1  1    2    2    3    2  2   high     TRUE  TRUE
2  2    1    2    1    1  1  basic     TRUE  TRUE
3  3    2    1    2    1  2 medium     TRUE  TRUE
4  4    5    9    2    2  4 medium     TRUE  TRUE
5  5    7    7    1    1  1  basic     TRUE  TRUE
6  6    8    4    3    2 NA   high     TRUE FALSE
7  7    9   25    2    1 NA medium     TRUE FALSE
8  8    5    3   -1    2 NA   &lt;NA&gt;     TRUE FALSE</code></pre>
</div>
</div>
<div class="cell">

</div>
</div>
</div>
</div>
<p>…das gleiche machen wir für Modell <code>m4</code>, welches neben <code>var2</code> und <code>var1</code> ja auch noch <code>ed_fct</code> enthält:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dat1<span class="sc">$</span>compl_m4 <span class="ot">&lt;-</span> dat1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(var1,var2,ed_fct) <span class="sc">%&gt;%</span> <span class="fu">complete.cases</span>(.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>So sieht das dann im Datensatz aus:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dat1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id var1 var2 educ gend  x ed_fct compl_m1 compl_m4
1  1    2    2    3    2  2   high     TRUE     TRUE
2  2    1    2    1    1  1  basic     TRUE     TRUE
3  3    2    1    2    1  2 medium     TRUE     TRUE
4  4    5    9    2    2  4 medium     TRUE     TRUE
5  5    7    7    1    1  1  basic     TRUE     TRUE
6  6    8    4    3    2 NA   high     TRUE     TRUE
7  7    9   25    2    1 NA medium     TRUE     TRUE
8  8    5    3   -1    2 NA   &lt;NA&gt;     TRUE    FALSE</code></pre>
</div>
</div>
</section>
<section id="fälle-mit-missings-finden" class="level3" data-number="9.1.2">
<h3 data-number="9.1.2" class="anchored" data-anchor-id="fälle-mit-missings-finden"><span class="header-section-number">9.1.2</span> Fälle mit missings finden</h3>
<p>Jetzt können wir nach diesen Variablen filtern und uns diese Fälle genauer ansehen. Dazu filtern wir nach den Fällen, die zwar in <code>m1</code> enthalten (also <code>compl_m1</code> = <code>TRUE</code>) sind, aber nicht in <code>m4</code> (<code>compl_m4</code> = <code>FALSE</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(compl_m1 <span class="sc">==</span> T <span class="sc">&amp;</span> compl_m4 <span class="sc">==</span> F) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id var1 var2 educ gend  x ed_fct compl_m1 compl_m4
1  8    5    3   -1    2 NA   &lt;NA&gt;     TRUE    FALSE</code></pre>
</div>
</div>
</section>
<section id="modelle-nur-mit-vollständigen-fällen-berechnen" class="level3" data-number="9.1.3">
<h3 data-number="9.1.3" class="anchored" data-anchor-id="modelle-nur-mit-vollständigen-fällen-berechnen"><span class="header-section-number">9.1.3</span> Modelle nur mit vollständigen Fällen berechnen</h3>
<p>Außerdem können wir jetzt auch das Modell <code>m1</code> so erstellen, dass wir nur die Fälle miteinbeziehen, die auch in Modell2 berücksichtigt werden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>m1_m4vars <span class="ot">&lt;-</span> <span class="fu">lm</span>(var2 <span class="sc">~</span> var1     , <span class="at">data =</span> <span class="fu">filter</span>(dat1,compl_m4 <span class="sc">==</span> T))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(<span class="st">"m1"</span><span class="ot">=</span>m1,<span class="st">"m1 mit m4vars"</span><span class="ot">=</span>m1_m4vars,<span class="st">"m4"</span><span class="ot">=</span>m4),<span class="at">gof_omit =</span> <span class="st">"IC|RM|Log|F"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> m1 </th>
   <th style="text-align:center;"> m1 mit m4vars </th>
   <th style="text-align:center;"> m4 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:center;"> −2.340 </td>
   <td style="text-align:center;"> −1.832 </td>
   <td style="text-align:center;"> −2.511 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (4.345) </td>
   <td style="text-align:center;"> (4.646) </td>
   <td style="text-align:center;"> (5.681) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> var1 </td>
   <td style="text-align:center;"> 1.839 </td>
   <td style="text-align:center;"> 1.848 </td>
   <td style="text-align:center;"> 1.753 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (0.773) </td>
   <td style="text-align:center;"> (0.814) </td>
   <td style="text-align:center;"> (0.835) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ed_fctmedium </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;"> 4.830 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;"> (6.038) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ed_fcthigh </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;">  </td>
   <td style="text-align:center;"> −3.253 </td>
  </tr>
  <tr>
   <td style="text-align:left;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (6.554) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Num.Obs. </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 7 </td>
   <td style="text-align:center;"> 7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 </td>
   <td style="text-align:center;"> 0.486 </td>
   <td style="text-align:center;"> 0.508 </td>
   <td style="text-align:center;"> 0.700 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 Adj. </td>
   <td style="text-align:center;"> 0.400 </td>
   <td style="text-align:center;"> 0.409 </td>
   <td style="text-align:center;"> 0.400 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Jetzt haben wir also in <code>m1 mit m4vars</code> und <code>m4</code> die gleiche Fallzahl und können so die Ergebnisse direkt miteinander vergleichen.</p>
</section>
</section>
<section id="interaktionen" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="interaktionen"><span class="header-section-number">9.2</span> Interaktionen</h2>
<p>Interaktionen zwischen zwei Variablen können wir mit <code>*</code> berechnen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dat1<span class="sc">$</span>g_fct <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat1<span class="sc">$</span>gend,<span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"women"</span>,<span class="st">"men"</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>m5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(var2 <span class="sc">~</span> var1 <span class="sc">*</span> g_fct, dat1)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = var2 ~ var1 * g_fct, data = dat1)

Residuals:
      1       2       3       4       5       6       7       8 
-1.5000  2.6145 -0.8827  4.5000 -7.3687 -1.5000  5.6369 -1.5000 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)    -3.1117     4.7702  -0.652   0.5498  
var1            2.4972     0.8211   3.041   0.0384 *
g_fctmen        5.9451     8.4973   0.700   0.5227  
var1:g_fctmen  -2.1639     1.5331  -1.411   0.2310  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.493 on 4 degrees of freedom
Multiple R-squared:  0.7244,    Adjusted R-squared:  0.5177 
F-statistic: 3.504 on 3 and 4 DF,  p-value: 0.1286</code></pre>
</div>
</div>
<p>Interaktionen sollten immer visualisiert werden. Dafür ist <a href="https://strengejacke.github.io/ggeffects/index.html"><code>{ggeffects}</code></a> eine große Hilfe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggeffects"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggeffects)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpredict</span>(m5, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"var1"</span>,<span class="st">"g_fct[women,men]"</span>)) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="09_reg2_files/figure-html/unnamed-chunk-14-1.png" style="width:80.0%;height:60.0%"></p>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># oder nebeneinander:</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpredict</span>(m5, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"var1"</span>,<span class="st">"g_fct[women,men]"</span>)) <span class="sc">%&gt;%</span> <span class="fu">plot</span>(<span class="at">facet=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="09_reg2_files/figure-html/unnamed-chunk-14-2.png" style="width:80.0%;height:60.0%"></p>
</div>
</div>
<p>Wir können diese Darstellung mit den bekannten <code>{ggplot2}</code>-Befehlen verändern:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpredict</span>(m5, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"var1"</span>,<span class="st">"g_fct[women,men]"</span>)) <span class="sc">%&gt;%</span> <span class="fu">plot</span>() <span class="sc">+</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"women"</span>,<span class="st">"men"</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Frauen"</span>,<span class="st">"Männer"</span>)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"women"</span>,<span class="st">"men"</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Frauen"</span>,<span class="st">"Männer"</span>)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Vorhergesagte Werte für var2"</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Gender"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Werte für var1"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Vorhergesagte Werte für var1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for 'colour' is already present. Adding another scale for 'colour',
which will replace the existing scale.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="09_reg2_files/figure-html/unnamed-chunk-15-1.png" style="width:60.0%;height:60.0%"></p>
</div>
</div>
</section>
<section id="quadratische-terme-polynome" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="quadratische-terme-polynome"><span class="header-section-number">9.3</span> Quadratische Terme &amp; Polynome</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>m6 <span class="ot">&lt;-</span> <span class="fu">lm</span>(var2 <span class="sc">~</span> var1 <span class="sc">+</span> <span class="fu">I</span>(var1<span class="sc">^</span><span class="dv">2</span>), dat1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(id <span class="sc">!=</span> <span class="dv">7</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = var2 ~ var1 + I(var1^2), data = dat1 %&gt;% filter(id != 
    7))

Residuals:
      1       2       3       4       5       6       7 
-0.5443  1.4334 -1.5443  3.2043  1.2713 -1.0248 -2.7957 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  -1.8580     3.4066  -0.545    0.614
var1          2.6481     1.9083   1.388    0.238
I(var1^2)    -0.2235     0.2110  -1.059    0.349

Residual standard error: 2.524 on 4 degrees of freedom
Multiple R-squared:  0.5099,    Adjusted R-squared:  0.2648 
F-statistic: 2.081 on 2 and 4 DF,  p-value: 0.2402</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpredict</span>(m6, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"var1"</span>)) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="09_reg2_files/figure-html/unnamed-chunk-18-1.png" style="width:60.0%;height:60.0%"></p>
</div>
</div>
</section>
<section id="gewichtetes-regressionsmodell" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="gewichtetes-regressionsmodell"><span class="header-section-number">9.4</span> Gewichtetes Regressionsmodell</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>etb18 <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_dta</span>(<span class="st">"./data/BIBBBAuA_2018_suf1.0.dta"</span>) </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>etb18x <span class="ot">&lt;-</span> etb18 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(F518_SUF <span class="sc">&lt;</span> <span class="dv">99998</span>, zpalter <span class="sc">&lt;</span> <span class="dv">100</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>modx <span class="ot">&lt;-</span> <span class="fu">lm</span>(F518_SUF <span class="sc">~</span> zpalter <span class="sc">+</span> <span class="fu">I</span>(zpalter<span class="sc">^</span><span class="dv">2</span>),<span class="at">data=</span>etb18x)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>etb18_weighted <span class="ot">&lt;-</span> <span class="fu">svydesign</span>(<span class="at">id      =</span> <span class="sc">~</span>intnr,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">weights =</span> <span class="sc">~</span>gew2018,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">data    =</span> etb18x)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># family = gaussian() bekommen wir ein lineares Regressionsmodell, wie bei lm() - mit gewichtet</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>survey_modx <span class="ot">&lt;-</span> <span class="fu">svyglm</span>(F518_SUF <span class="sc">~</span> zpalter <span class="sc">+</span> <span class="fu">I</span>(zpalter<span class="sc">^</span><span class="dv">2</span>), </span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>                    <span class="at">family =</span> <span class="fu">gaussian</span>(), <span class="at">data =</span> etb18,<span class="at">design =</span> etb18_weighted)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(<span class="st">"lm()"</span><span class="ot">=</span>modx,<span class="st">"svyglm()"</span><span class="ot">=</span> survey_modx),<span class="at">gof_omit =</span> <span class="st">"RM|IC|Log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> lm() </th>
   <th style="text-align:center;"> svyglm() </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:center;"> 586.343 </td>
   <td style="text-align:center;"> 118.307 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (381.240) </td>
   <td style="text-align:center;"> (338.854) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> zpalter </td>
   <td style="text-align:center;"> 110.543 </td>
   <td style="text-align:center;"> 121.639 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (17.556) </td>
   <td style="text-align:center;"> (17.635) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> I(zpalter^2) </td>
   <td style="text-align:center;"> −0.959 </td>
   <td style="text-align:center;"> −1.116 </td>
  </tr>
  <tr>
   <td style="text-align:left;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.194) </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.213) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Num.Obs. </td>
   <td style="text-align:center;"> 16543 </td>
   <td style="text-align:center;"> 16543 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 </td>
   <td style="text-align:center;"> 0.008 </td>
   <td style="text-align:center;"> 0.013 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 Adj. </td>
   <td style="text-align:center;"> 0.008 </td>
   <td style="text-align:center;"> 0.013 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> F </td>
   <td style="text-align:center;"> 64.956 </td>
   <td style="text-align:center;"> 109.810 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="weitere-beispiele-mit-starwars" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="weitere-beispiele-mit-starwars"><span class="header-section-number">9.5</span> Weitere Beispiele mit <code>starwars</code></h2>
<p>Die folgenden Beispiele basieren vornehmlich auf dem <code>starwars</code>-Datensatz aus <code>{dplyr}</code>, hier ein kurzer Blick in die Daten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> <span class="fu">select</span>(name,height,mass,hair_color,gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 5
   name               height  mass hair_color    gender   
   &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;    
 1 Luke Skywalker        172    77 blond         masculine
 2 C-3PO                 167    75 &lt;NA&gt;          masculine
 3 R2-D2                  96    32 &lt;NA&gt;          masculine
 4 Darth Vader           202   136 none          masculine
 5 Leia Organa           150    49 brown         feminine 
 6 Owen Lars             178   120 brown, grey   masculine
 7 Beru Whitesun lars    165    75 brown         feminine 
 8 R5-D4                  97    32 &lt;NA&gt;          masculine
 9 Biggs Darklighter     183    84 black         masculine
10 Obi-Wan Kenobi        182    77 auburn, white masculine
# … with 77 more rows</code></pre>
</div>
</div>
<p>Unser Beispiel ist ein simples: der Zusammenhang zwischen Größe und Gewicht der Star Wars Helden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(mass <span class="sc">~</span> height, <span class="at">data =</span> starwars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="robuste-standardfehler" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="robuste-standardfehler"><span class="header-section-number">9.6</span> “Robuste” Standardfehler</h2>
<p>Häufig müssen die Standardfehler an Verstöße gegen die allgemeinen Annahmen (Homoskedastizität usw.) angepasst werden.</p>
<p>Die gute Nachricht ist, dass R eine ganze Reihe an Möglichkeiten bietet, Standard-Fehler zu korrigieren. Unter anderem mit <a href="http://sandwich.r-forge.r-project.org/articles/sandwich.html">{sandwich}</a> oder <a href="https://declaredesign.org/r/estimatr/articles/getting-started.html">{estimatr}</a>.</p>
<p>Eine sehr einfache Variante ist die Korrektur von Standardfehlern in <code>{modelsummary}</code>, die wir uns etwas genauer ansehen:</p>
<p>Wir können sog. <em>heteroskedasticity-consistent</em> (HC) “robuste” Standardfehler mit der <code>vcov</code>-Option <code>HC</code> in <code>modelsummary()</code> anfordern. Die Hilfe-Seite für <code>{modelsummary}</code> bietet eine <a href="https://vincentarelbundock.github.io/modelsummary/articles/modelsummary.html#vcov">Liste mit allen Optionen</a>.</p>
<p>Eine Option ist auch <code>stata</code>, um Ergebnisse aus Statas <code>, robust</code> zu replizieren. <a href="https://declaredesign.org/r/estimatr/articles/stata-wls-hat.html">Hier mehr</a> zu den Hintergründen und Unterschieden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(mod1,mod1,mod1,mod1),<span class="at">vcov =</span> <span class="fu">c</span>(<span class="st">"classical"</span>,<span class="st">"HC"</span>,<span class="st">"HC2"</span>,<span class="st">"stata"</span>),<span class="at">gof_omit =</span> <span class="st">"RM|IC|Log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> Model 1 </th>
   <th style="text-align:center;"> Model 2 </th>
   <th style="text-align:center;"> Model 3 </th>
   <th style="text-align:center;"> Model 4 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:center;"> −13.810 </td>
   <td style="text-align:center;"> −13.810 </td>
   <td style="text-align:center;"> −13.810 </td>
   <td style="text-align:center;"> −13.810 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (111.155) </td>
   <td style="text-align:center;"> (22.963) </td>
   <td style="text-align:center;"> (23.456) </td>
   <td style="text-align:center;"> (23.362) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> height </td>
   <td style="text-align:center;"> 0.639 </td>
   <td style="text-align:center;"> 0.639 </td>
   <td style="text-align:center;"> 0.639 </td>
   <td style="text-align:center;"> 0.639 </td>
  </tr>
  <tr>
   <td style="text-align:left;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.626) </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.085) </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.088) </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.086) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Num.Obs. </td>
   <td style="text-align:center;"> 59 </td>
   <td style="text-align:center;"> 59 </td>
   <td style="text-align:center;"> 59 </td>
   <td style="text-align:center;"> 59 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 </td>
   <td style="text-align:center;"> 0.018 </td>
   <td style="text-align:center;"> 0.018 </td>
   <td style="text-align:center;"> 0.018 </td>
   <td style="text-align:center;"> 0.018 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> R2 Adj. </td>
   <td style="text-align:center;"> 0.001 </td>
   <td style="text-align:center;"> 0.001 </td>
   <td style="text-align:center;"> 0.001 </td>
   <td style="text-align:center;"> 0.001 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> F </td>
   <td style="text-align:center;"> 1.040 </td>
   <td style="text-align:center;"> 56.856 </td>
   <td style="text-align:center;"> 52.753 </td>
   <td style="text-align:center;"> 54.928 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Std.Errors </td>
   <td style="text-align:center;"> Classical </td>
   <td style="text-align:center;"> HC </td>
   <td style="text-align:center;"> HC2 </td>
   <td style="text-align:center;"> Stata </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="fixed-effects-modelle-mit-fixest" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="fixed-effects-modelle-mit-fixest"><span class="header-section-number">9.7</span> Fixed effects Modelle mit <code>{fixest}</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"fixest"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://lrberge.github.io/fixest"><code>{fixest}</code></a>) ist zwar noch relativ neu, aber bietet eine große Auswahl an Möglichkeiten: <a href="#10_log_reg.qmd##feglm">logitische Modelle</a>, mehr-dimensionale Fixed Effects, Multiway clustering, … Und es ist sehr schnell, <a href="https://lrberge.github.io/fixest/#benchmarking">bspw. schneller</a> als Statas <code>reghdfe</code>. Für mehr Details empfiehlt sich die <a href="https://lrberge.github.io/fixest/articles/fixest_walkthrough.html">Vignette</a>.</p>
<p>Die zentrale Funktion zur Schätzung linearer FE-Regressionsmodelle ist <code>feols()</code> - sie funktioniert ganz ähnlich zu <code>lm()</code>. Auch hier geben wir wieder eine Formel nach dem Schema <code>abhängige Variabe ~ unabhängige Variable(n)</code> an. Wir fügen lediglich mit <code>|</code> die Variable hinzu, welche die FEs festlegt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fixest)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>fe_mod1 <span class="ot">&lt;-</span> <span class="fu">feols</span>(mass <span class="sc">~</span> height <span class="sc">|</span> species, <span class="at">data =</span> starwars)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>fe_mod1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: mass
Observations: 58 
Fixed-effects: species: 31
Standard-errors: Clustered (species) 
       Estimate Std. Error t value  Pr(&gt;|t|)    
height 0.974876   0.044291 22.0105 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 9.69063     Adj. R2: 0.99282 
                Within R2: 0.662493</code></pre>
</div>
</div>
<p><code>{fixest}</code> clustert automatisch die Standardfehler entlang der FE-Variable (hier also <code>species</code>). Wenn wir das mal nicuth möchten, können wir mit der <code>se</code>-Option <code>= "standard"</code> ungeclusterte SE anfordern:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fe_mod1, <span class="at">se =</span> <span class="st">'standard'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: mass
Observations: 58 
Fixed-effects: species: 31
Standard-errors: IID 
       Estimate Std. Error t value   Pr(&gt;|t|)    
height 0.974876   0.136463  7.1439 1.3797e-07 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 9.69063     Adj. R2: 0.99282 
                Within R2: 0.662493</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fe_mod1, <span class="at">cluster =</span> <span class="sc">~</span>species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>OLS estimation, Dep. Var.: mass
Observations: 58 
Fixed-effects: species: 31
Standard-errors: Clustered (species) 
       Estimate Std. Error t value  Pr(&gt;|t|)    
height 0.974876   0.044291 22.0105 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 9.69063     Adj. R2: 0.99282 
                Within R2: 0.662493</code></pre>
</div>
</div>
<p><code>{modelsummary}</code> zeigt die geclusterten SE:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(fe_mod1),<span class="at">gof_omit =</span> <span class="st">"R|IC|Log|F"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> Model 1 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> height </td>
   <td style="text-align:center;"> 0.975 </td>
  </tr>
  <tr>
   <td style="text-align:left;box-shadow: 0px 1px">  </td>
   <td style="text-align:center;box-shadow: 0px 1px"> (0.044) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Num.Obs. </td>
   <td style="text-align:center;"> 58 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Std.Errors </td>
   <td style="text-align:center;"> by: species </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="mehrebenenmodelle-mit-lme4" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="mehrebenenmodelle-mit-lme4"><span class="header-section-number">9.8</span> Mehrebenenmodelle mit <code>{lme4}</code></h2>
<p>Mit <code>lmer()</code> können wir ein Random Intercept Modell berechnen, indem wir mit <code>( 1 | species)</code> angeben, dass für <code>species</code> jeweils ine eigenes Random Intercept berechnet werden soll:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>ml_m3 <span class="ot">&lt;-</span> <span class="fu">lmer</span>(mass <span class="sc">~</span> height <span class="sc">+</span> ( <span class="dv">1</span> <span class="sc">|</span> species), <span class="at">data=</span>starwars)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(ml_m3),<span class="at">gof_omit =</span> <span class="st">"R|IC|Log|F"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> Model 1 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:center;"> −52.698 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (47.579) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> height </td>
   <td style="text-align:center;"> 0.969 </td>
  </tr>
  <tr>
   <td style="text-align:left;">  </td>
   <td style="text-align:center;"> (0.135) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> SD (Intercept species) </td>
   <td style="text-align:center;"> 231.270 </td>
  </tr>
  <tr>
   <td style="text-align:left;box-shadow: 0px 1px"> SD (Observations) </td>
   <td style="text-align:center;box-shadow: 0px 1px"> 14.472 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Num.Obs. </td>
   <td style="text-align:center;"> 58 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Mehr zu Mehrebenenmodellen und <code>{lme4}</code> in Blogposts von <a href="http://www.rensenieuwenhuis.nl/r-sessions-16-multilevel-model-specification-lme4/">Rense Nieuwenhuis</a> und <a href="https://www.tjmahr.com/plotting-partial-pooling-in-mixed-effects-models/">Tristan Mahr</a>.</p>
<!-- ## Abschließende Bemerkungen -->
<!-- Zusammengefasst lassen uns `{fixest}` und `{modelsummary}` Standardfehler nach der eigentlichen Modellschätzung anpassen, indem wir die  `se` or `cluster` Optionen verwenden.  -->
<!-- Ein [Blog Post von Grant Mcdermott](https://grantmcdermott.com/better-way-adjust-SEs/) argumentiert noch etwas ausführlicher, warum die nachträgliche Berechnung der Standardfehler (anstelle einer kompletten Neuschätzung des Modells) eine gute Idee ist - auch wenn es für Stata-Nutzende ein sehr ungewöhnliches Vorgehen ist. -->
<!-- Die exakte Replikation von Standardfehlern aus anderen Programmen (bspw, Stata) ist oft schwieriger als es zunächst scheint.  -->
<!-- Siehe auch die Diskussion [hier](https://github.com/sgaure/lfe/issues/1#issuecomment-530643808)  -->
<!-- [Detaillierte vignette](https://lrberge.github.io/fixest/articles/standard_errors.html) `{fixest}` wie SEs aus anderen Programmen repliziert werden können. -->
<!-- [Detailliertes Paper](http://sandwich.r-forge.r-project.org/articles/jss_2020.html) von den Autoren von `{sandwich}` zu diesem Thema.  -->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./09_reg.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regressionsmodelle</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./10_log_reg.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Logistische Regressionsmodelle</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Alle Kursinhalte <i class="fa-brands fa-creative-commons" aria-hidden="true"></i> 2022-2023 von <a href="https://afilser.netlify.app/">Andreas Filser</a><br> <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC Lizenz mit Namensnennung <i class="fa-brands fa-creative-commons" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-by" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-nc" aria-hidden="true"></i></a><br> Erstellt mit <i class="fa-brands fa-r-project" aria-hidden="true"></i>, Code <a href="https://github.com/filius23/BIBB_R">hier einsehbar <i class="fa-brands fa-github" aria-hidden="true"></i></a></div>   
  </div>
</footer>



</body></html>